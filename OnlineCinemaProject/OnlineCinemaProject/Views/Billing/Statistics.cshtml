@model IEnumerable<OnlineCinemaProject.Models.payment>

@using PagedList.Mvc;
<link href="~/Content/PagedList.css" rel="stylesheet" type="text/css" />
@{
    Layout = "../Shared/_Dashboard.cshtml";
}

@{
    //page title
    ViewBag.Title = "Панель управления биллингом";
}

<div class="row">

    <div class="col-lg-3 col-sm-6 col-xs-6 col-xxs-12">
        <div class="smallstat box">
            <i class="fa fa-users blue"></i>
            <span class="title">Клиенты</span>
            <span class="value">@ViewBag.Clients</span>
        </div>
    </div><!--/col-->

    <div class="col-lg-3 col-sm-6 col-xs-6 col-xxs-12">
        <div class="smallstat box">
            <i class="fa fa-history red"></i>
            <span class="title">Транзакции</span>
            <span class="value">@Model.Count()</span>
        </div>
    </div><!--/col-->

    <div class="col-lg-3 col-sm-6 col-xs-6 col-xxs-12">
        <div class="smallstat box">
            <i class="fa fa-download green"></i>
            <span class="title">Прибыль</span>
            <span class="value">@ViewBag.Income</span>
        </div>
    </div><!--/col-->

    <div class="col-lg-3 col-sm-6 col-xs-6 col-xxs-12">
        <div class="smallstat box">
            <i class="fa fa-money yellow"></i>
            <span class="title">Аккаунт</span>
            <span class="value">@ViewBag.Account</span>
        </div>
    </div><!--/col-->

</div><!--/row-->
<div class="row">
    <div class="col-lg-12">
        <div class="box">
            <div class="box-header" data-original-title="">
                <h2><i class="fa fa-usd"></i><span class="break"></span>Платежи</h2>
                <div class="box-icon">
                    <a href="#" class="btn-minimize"><i class="fa fa-chevron-up"></i></a>
                    @*<a href="http://bootstrapmaster.com/live/simpliq2/table.html#" class="btn-close"><i class="fa fa-times"></i></a>*@
                </div>
            </div>
            <div class="box-content">
                <div id="DataTables_Table_0_wrapper" class="dataTables_wrapper form-inline" role="grid">

                    <table class="table table-striped table-bordered bootstrap-datatable datatable dataTable" id="DataTables_Table_0" aria-describedby="DataTables_Table_0_info">
                        <thead>
                        <tr role="row">
                            <th class="sorting_asc"
                                role="columnheader"
                                tabindex="0"
                                aria-controls="DataTables_Table_0"
                                rowspan="1"
                                colspan="1"
                                aria-sort="ascending"
                                aria-label="Username: activate to sort column descending"
                                style="width: 293px;">Пользователь</th>
                            <th class="sorting_asc"
                                role="columnheader"
                                tabindex="0"
                                aria-controls="DataTables_Table_0"
                                rowspan="1"
                                colspan="1"
                                aria-sort="ascending"
                                aria-label="Username: activate to sort column descending"
                                style="width: 293px;">Название Услуги</th>
                            <th class="sorting"
                                role="columnheader"
                                tabindex="0"
                                aria-controls="DataTables_Table_0"
                                rowspan="1"
                                colspan="1"
                                aria-label="Date registered: activate to sort column ascending"
                                style="width: 208px;">Дата оплаты</th>
                            <th class="sorting"
                                role="columnheader"
                                tabindex="0"
                                aria-controls="DataTables_Table_0"
                                rowspan="1"
                                colspan="1"
                                aria-label="Role: activate to sort column ascending"
                                style="width: 120px;">Сумма оплаты</th>

                        </tr>
                        </thead>

                        <tbody role="alert" aria-live="polite" aria-relevant="all">
                            @foreach (var item in Model)
                            {
                                if (!item.payment_type)
                                {
                                    <tr class="odd">
                                        <td class=" sorting_1">@item.aspnetuser.UserName</td>
                                        <td class=" sorting_1">@item.title</td>
                                        <td class="center ">@item.payment_date</td>
                                        <td class="center ">@item.amount сум</td>
                                    </tr>
                                }
                                
                            }
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div><!--/col-->

</div><!--/row-->

<div class="row">
    <div class="col-lg-12">
        <div class="box">
            <div class="box-header" data-original-title="">
                <h2><i class="fa fa-usd"></i><span class="break"></span>Поступления денег на счета пользователей</h2>
                <div class="box-icon">
                    <a href="#" class="btn-minimize"><i class="fa fa-chevron-up"></i></a>
                    @*<a href="http://bootstrapmaster.com/live/simpliq2/table.html#" class="btn-close"><i class="fa fa-times"></i></a>*@
                </div>
            </div>
            <div class="box-content">
                <div id="DataTables_Table_0_wrapper" class="dataTables_wrapper form-inline" role="grid">

                    <table class="table table-striped table-bordered bootstrap-datatable datatable dataTable" id="DataTables_Table_0" aria-describedby="DataTables_Table_0_info">
                        <thead>
                            <tr role="row">
                                <th class="sorting_asc"
                                    role="columnheader"
                                    tabindex="0"
                                    aria-controls="DataTables_Table_0"
                                    rowspan="1"
                                    colspan="1"
                                    aria-sort="ascending"
                                    aria-label="Username: activate to sort column descending"
                                    style="width: 293px;">Пользователь</th>
                                <th class="sorting_asc"
                                    role="columnheader"
                                    tabindex="0"
                                    aria-controls="DataTables_Table_0"
                                    rowspan="1"
                                    colspan="1"
                                    aria-sort="ascending"
                                    aria-label="Username: activate to sort column descending"
                                    style="width: 293px;">Название Услуги</th>
                                <th class="sorting"
                                    role="columnheader"
                                    tabindex="0"
                                    aria-controls="DataTables_Table_0"
                                    rowspan="1"
                                    colspan="1"
                                    aria-label="Date registered: activate to sort column ascending"
                                    style="width: 208px;">Дата оплаты</th>
                                <th class="sorting"
                                    role="columnheader"
                                    tabindex="0"
                                    aria-controls="DataTables_Table_0"
                                    rowspan="1"
                                    colspan="1"
                                    aria-label="Role: activate to sort column ascending"
                                    style="width: 120px;">Сумма оплаты</th>

                            </tr>
                        </thead>

                        <tbody role="alert" aria-live="polite" aria-relevant="all">
                            @foreach (var item in Model)
                            {
                                if (item.payment_type)
                                {
                                    <tr class="odd">
                                        <td class=" sorting_1">@item.aspnetuser.UserName</td>
                                        <td class=" sorting_1">@item.title</td>
                                        <td class="center ">@item.payment_date</td>
                                        <td class="center ">@item.amount сум</td>
                                    </tr>    
                                }
                            }
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div><!--/col-->

</div>
<div class="row">
    <div class="col-md-6 ">
        @( (DotNet.Highcharts.Highcharts) ViewBag.MoneyIncomes)
    </div>
    <div class="col-md-6 ">
        @( (DotNet.Highcharts.Highcharts) ViewBag.Subscribers)
    </div>

</div>
<div class="row">
    <div class="col-md-6 ">
        @( (DotNet.Highcharts.Highcharts)ViewBag.TariffIncomes)
    </div>
    <div class="col-md-6 ">
        @( (DotNet.Highcharts.Highcharts)ViewBag.TariffIncomes)
    </div>
    
</div>


<script type="text/javascript">
    $("#MyDate").datepicker();
</script>
@section scripts
{
    @Scripts.Render("~/bundles/highcharts")
}